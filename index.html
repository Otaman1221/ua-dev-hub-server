<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>UA Dev Hub | Web Admin</title>
    <style>
        :root { --bg: #1a1b26; --panel: #16161e; --accent: #7aa2f7; --text: #c0caf5; --mine: #3d59a1; --others: #24283b; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; display: flex; height: 100vh; }
        #sidebar { width: 70px; background: var(--panel); border-right: 1px solid #3b4261; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
        #main { flex: 1; display: flex; flex-direction: column; }
        #header { height: 50px; background: var(--panel); display: flex; align-items: center; padding: 0 20px; border-bottom: 1px solid #3b4261; }
        #messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .bubble { max-width: 70%; padding: 10px 15px; border-radius: 12px; font-size: 14px; }
        .mine { align-self: flex-end; background: var(--mine); }
        .others { align-self: flex-start; background: var(--others); }
        #input-area { padding: 20px; background: var(--panel); display: flex; gap: 10px; }
        input { flex: 1; background: #24283b; border: 1px solid #3b4261; color: white; padding: 10px; border-radius: 20px; outline: none; }
    </style>
</head>
<body>
    <div id="sidebar"> <span style="font-size: 24px;">ðŸ’¬</span> </div>
    <div id="main">
        <div id="header"> <b>ðŸ’¬ ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¸Ð¹ Ñ‡Ð°Ñ‚</b> </div>
        <div id="messages"></div>
        <div id="input-area">
            <input type="text" id="msgIn" placeholder="ÐÐ°Ð¿Ð¸ÑˆÑ–Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ...">
            <button onclick="send()" style="background: var(--accent); border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer;">âž¤</button>
        </div>
    </div>

    <script>
        async function load() {
            const res = await fetch('/get_messages');
            const data = await res.json();
            const cont = document.getElementById('messages');
            cont.innerHTML = data.map(m => `
                <div class="bubble ${m.user === 'Otaman1221' ? 'mine' : 'others'}">
                    <div style="font-size: 10px; font-weight: bold; color: #bb9af7;">${m.user}</div>
                    ${m.text}
                </div>
            `).join('');
            cont.scrollTop = cont.scrollHeight;
        }

        async function send() {
            const input = document.getElementById('msgIn');
            await fetch('/send_message', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({text: input.value})
            });
            input.value = '';
            load();
        }

        setInterval(load, 3000);
        load();
    </script>
</body>
</html>